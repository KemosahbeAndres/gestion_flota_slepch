<templates xml:space="preserve">
    <t t-name="gestion_flota_slepch.DocumentCategoryForm">
        <div class="modal o_dialog show d-block" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <!-- HEADER -->
                    <div class="modal-header">
                        <h5 class="modal-title">
                            <t t-esc="state.editionMode ? 'Editando tipo de documento' : 'Creando tipo de documento'" />
                        </h5>
                        <button type="button" class="btn-close" aria-label="Close" t-on-click="resetClose"/>
                    </div>

                    <!-- BODY -->
                    <div class="modal-body">
                        <div class="o_form p-4">
                            <div class="o_field input-group mt-2">
                                <label class="input-group-text">Nombre</label>
                                <input 
                                    class="form-control" 
                                    t-att-class="{
                                        'is-invalid': state.errors.name
                                    }" 
                                    type="text"
                                    t-model="state.name"
                                    t-on-input="validateForm"
                                    t-on-focus="() => state.touched.name = false"
                                    t-on-blur="validateForm"
                                    t-att-value="state.name" />
                            </div>
                            <div class="invalid-feedback">
                            <p>Debes llenar este campo!</p>
                            </div>
                            <div class="o_field mt-2 input-group">
                                <label class="input-group-text">Documento Padre</label>
                                <select class="form-select" 
                                    t-on-change="onChangeParentCategory"
                                    t-model="state.parent_id"
                                    t-att-disabled="state.parent_blocked">
                                    <option value="">Ninguno</option>
                                    <t t-foreach="state.categories" t-as="cat" t-key="cat.id">
                                        <option t-att-value="cat.id">
                                            <t t-esc="cat.name"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="o_field mt-2 input-group">
                                <label class="input-group-text">Asignar a</label>
                                <select class="form-select" 
                                    t-model="state.document_type"
                                    t-att-disabled="state.type_blocked"
                                    t-on-change="ev => state.document_type = ev.target.value">
                                    <option value="" t-att-selected="state.document_type == 'empty'">Ninguno</option>
                                    <option value="vehicles">Vehiculos</option>
                                    <option value="drivers">Conductores</option>
                                    <option value="incidents">Incidentes</option>
                                    <option value="contracts">Contratos</option>
                                </select>
                            </div>
                            
                            <div class="o_field mt-2">
                                <input class="btn-check form-check-input" 
                                    id="btn-required-check"
                                    autocomplete="off"
                                    type="checkbox"
                                    t-att-disabled="state.required_blocked"
                                    t-on-change="ev => state.required = ev.target.checked"
                                    t-att-checked="state.required"
                                    style="clip:initial;left:2rem;margin-left:1.2em;margin-top:0.6em;margin-bottom:0.6em;"/>
                                <label style="padding-left:2em;" class="btn btn-outline-primary" for="btn-required-check">Obligatorio</label>
                            </div>
                            
                        </div>
                    </div>

                    <!-- FOOTER -->
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" t-on-click="resetClose">Cancelar</button>
                        <button class="btn btn-primary" type="button" t-on-click="saveCategory"
                                t-att-disabled="state.errors.name">
                            <t t-esc="state.editionMode ? 'Actualizar' : 'Crear'" />
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
